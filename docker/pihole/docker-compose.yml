version: "3"
services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    ports:
    - "53:53/tcp"
    # Bind only the public interface here or Docker iptables UDP nat will mess up DNS resolution for other containers
    - "192.168.1.14:53:53/udp"
    - "67:67/udp"
    - "8080:80/tcp"
    environment:
      TZ: 'America/Chicago'
      WEBPASSWORD: ''
      DNS1: '1.1.1.1'
      DNS2: '8.8.8.8'
    volumes:
    - './volumes/etc-pihole/:/etc/pihole/'
    - './volumes/etc-dnsmasq.d/:/etc/dnsmasq.d/'
    # nice DNS entries for devices
    - './lan.list:/etc/pihole/lan.list'
    - './02-lan.conf:/etc/dnsmasq.d/02-lan.conf'
    dns:
    - 127.0.0.1
    - 1.1.1.1
    cap_add:
    - NET_ADMIN
    restart: always
